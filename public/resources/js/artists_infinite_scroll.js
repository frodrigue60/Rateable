document.addEventListener("DOMContentLoaded",v=>{const d=document.querySelector("#data"),m=document.querySelector("#form-filter");let u,o=1,c,a;const h=window.location.href;y(),m.addEventListener("change",function(r){let e=document.querySelector("#select-type").value,t=document.querySelector("#select-year").value,s=document.querySelector("#select-season").value,l=document.querySelector("#select-sort").value,n=document.querySelector("#select-char").value;p(e,t,s,l,n)}),window.addEventListener("scroll",function(){window.scrollY+window.innerHeight+300>=document.documentElement.scrollHeight&&(c==null||o<=c)&&(o++,f(o))});function i(r){fetch(r,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(e=>{if(e.ok)return e.json();c=0}).then(e=>{if(e.html===""){c=0;return}else{let l=function(){s.forEach(n=>{n.textContent.length>25&&(n.textContent=n.textContent.substr(0,25)+"...")})};var t=l;c=e.lastPage,d.innerHTML+=e.html;let s=document.querySelectorAll(".post-titles");l()}}).catch(e=>console.error(e))}function f(r){let e=window.location.href,t=new URLSearchParams(window.location.search);t.has("type")||t.has("tag")||t.has("sort")||t.has("char")?u="&page=":u="?page=",a=e+u+r,i(a)}function y(){i(h)}function p(r,e,t,s,l){o=1,w();let n="?type="+r+"&year="+e+"&season="+t+"&sort="+s+"&char="+l;a=h+n,history.pushState(null,null,a),i(a)}function w(){d.innerHTML=""}});
