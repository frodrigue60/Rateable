document.addEventListener("DOMContentLoaded",q=>{const f=document.querySelector("#data"),m=document.querySelector("#form-filter");let u,r=1,c,a;const h=window.location.href;p(),m.addEventListener("change",function(l){let e=document.querySelector("#select-filterBy").value,t=document.querySelector("#select-type").value,s=document.querySelector("#select-year").value,o=document.querySelector("#select-season").value,n=document.querySelector("#select-sort").value,d=document.querySelector("#select-char").value;v(e,t,s,o,n,d)}),window.addEventListener("scroll",function(){window.scrollY+window.innerHeight+300>=document.documentElement.scrollHeight&&(c==null||r<=c)&&(r++,y(r))});function i(l){fetch(l,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(e=>{if(e.ok)return e.json();c=0}).then(e=>{if(e.html===""){c=0;return}else{let o=function(){s.forEach(n=>{n.textContent.length>25&&(n.textContent=n.textContent.substr(0,25)+"...")})};var t=o;c=e.lastPage,f.innerHTML+=e.html;let s=document.querySelectorAll(".post-titles");o()}}).catch(e=>console.error(e))}function y(l){let e=window.location.href,t=new URLSearchParams(window.location.search);t.has("filterBy")||t.has("type")||t.has("tag")||t.has("sort")||t.has("char")?u="&page=":u="?page=",a=e+u+l,i(a)}function p(){i(h)}function v(l,e,t,s,o,n){r=1,w();let d="?filterBy="+l+"&type="+e+"&year="+t+"&season="+s+"&sort="+o+"&char="+n;a=h+d,history.pushState(null,null,a),i(a)}function w(){f.innerHTML=""}});
