const q=document.querySelector("#exampleModal"),i=document.querySelector("#posts"),c=document.querySelector("#artists"),u=document.querySelector("#tags"),p=document.querySelector("#users"),m=document.querySelector("#searchInputModal"),g=document.querySelector('meta[name="csrf-token"]').content,D=document.querySelectorAll(".post-titles"),x=document.querySelector(".loader-container"),T=document.querySelector("body");document.querySelector("#modalBody");const M=document.querySelector(".res"),a="https://anirank.work";let f;document.addEventListener("DOMContentLoaded",function(){x.style.display="none",T.removeAttribute("hidden"),y(),E(),q.addEventListener("shown.bs.modal",function(){m.focus(),m.addEventListener("keyup",()=>{h(),L(),clearTimeout(f),m.value.length>=1?f=setTimeout(r,250):(h(),y())});function r(){try{fetch(a+"/api/search",{headers:{"X-Request-With":"XMLHttpRequest","Content-Type":"application/json","X-CSRF-TOKEN":g},method:"POST",body:JSON.stringify({q:m.value})}).then(t=>t.json()).then(t=>{h(),t.posts.forEach(e=>{let o=a+"/anime/"+e.id+"/"+e.slug,n=document.createElement("div");n.classList.add("result");let s=document.createElement("a");s.href=o,s.textContent=e.title,n.appendChild(s),i.appendChild(n)}),t.artists.forEach(e=>{let o=a+"/artist/"+e.id+"/"+e.name_slug,n=document.createElement("div");n.classList.add("result");let s=document.createElement("a");s.href=o,s.textContent=e.name,n.appendChild(s),c.appendChild(n)}),t.tags.forEach(e=>{let o=e.name.split(" "),n=o[0],s=o[1],S=a+"/animes?type=&year="+s+"&season="+n+"&sort=&char=",C=document.createElement("div");C.classList.add("result");let v=document.createElement("a");v.href=S,v.textContent=e.name,C.appendChild(v),u.appendChild(C)}),t.users.forEach(e=>{let o=a+"/user/"+e.id,n=document.createElement("div");n.classList.add("result");let s=document.createElement("a");s.href=o,s.textContent=e.name,n.appendChild(s),p.appendChild(n)}),M.classList.remove("hidden")})}catch{}}});function h(){i.innerHTML="",c.innerHTML="",u.innerHTML="",p.innerHTML=""}function y(){i.appendChild(d("posts")),c.appendChild(d("artists")),u.appendChild(d("tags")),p.appendChild(d("users"))}function E(){D.forEach(r=>{r.textContent.length>25&&(r.textContent=r.textContent.substr(0,25)+"...")})}function d(r){let t=document.createElement("div");t.className="result",t.id=r;let e=document.createElement("span");return e.textContent="Nothing",t.appendChild(e),t}function l(){const r=document.createElement("div");r.className="d-flex justify-content-center";const t=document.createElement("div");t.className="spinner-border",t.setAttribute("role","status");const e=document.createElement("span");return e.className="visually-hidden",e.textContent="Loading...",t.appendChild(e),r.appendChild(t),r}function L(){i.appendChild(l()),c.appendChild(l()),u.appendChild(l()),p.appendChild(l())}});
