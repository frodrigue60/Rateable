const u=document.querySelector("#exampleModal"),t=document.querySelector("#posts"),i=document.querySelector("#artists"),a=document.querySelector("#tags"),o=document.querySelector("#users"),r=document.querySelector("#searchInputModal"),p=document.querySelector('meta[name="csrf-token"]').content,v=document.querySelectorAll(".post-titles"),h=document.querySelector(".loader-container"),f=document.querySelector("#body");document.querySelector("#modalBody");const y=document.querySelector(".res");let c,L=500;window.addEventListener("load",function(d){h.style.display="none",f.classList.remove("hidden")});document.addEventListener("DOMContentLoaded",function(){d(),l(),u.addEventListener("shown.bs.modal",function(){r.focus(),r.addEventListener("keyup",()=>{t.innerHTML='<div class="d-flex justify-content-center"><div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div></div>',i.innerHTML='<div class="d-flex justify-content-center"><div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div></div>',a.innerHTML='<div class="d-flex justify-content-center"><div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div></div>',o.innerHTML='<div class="d-flex justify-content-center"><div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div></div>',clearTimeout(c),r.value.length>=1?c=setTimeout(s,L):(t.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>',i.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>',a.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>',o.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>')});function s(){try{fetch("https://anirank-edcb15de9fd7.herokuapp.com/api/search?q="+r.value,{headers:{"X-Request-With":"XMLHttpRequest","Content-Type":"application/json","X-CSRF-TOKEN":p},method:"get"}).then(n=>n.json()).then(n=>{t.innerHTML="",i.innerHTML="",a.innerHTML="",o.innerHTML="",n.posts.forEach(e=>{t.innerHTML+='<div class="result"><a href="https://anirank-edcb15de9fd7.herokuapp.com/anime/'+e.id+"/"+e.slug+'"><span>'+e.title+"</span></a></div>"}),n.artists.forEach(e=>{i.innerHTML+='<div class="result"><a href="https://anirank-edcb15de9fd7.herokuapp.com/artist/'+e.id+"/"+e.name_slug+'"><span>'+e.name+"</span></a></div>"}),n.tags.forEach(e=>{a.innerHTML+='<div class="result"><a href="https://anirank-edcb15de9fd7.herokuapp.com/filter?tag='+e.name.replace(/ /g,"+")+'"><span>'+e.name+"</span></a></div>"}),n.users.forEach(e=>{o.innerHTML+='<div class="result"><a href="https://anirank-edcb15de9fd7.herokuapp.com/user/'+e.id+'"><span>'+e.name+"</span></a></div>"}),y.classList.remove("hidden")})}catch(n){console.log(n)}}});function d(){t.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>',i.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>',a.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>',o.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>'}function l(){v.forEach(s=>{s.textContent.length>25&&(s.textContent=s.textContent.substr(0,25)+"...")})}});
