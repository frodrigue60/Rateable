const S=document.querySelector("#exampleModal"),l=document.querySelector("#posts"),i=document.querySelector("#artists"),c=document.querySelector("#tags"),u=document.querySelector("#users"),p=document.querySelector("#searchInputModal"),q=document.querySelector('meta[name="csrf-token"]').content,g=document.querySelectorAll(".post-titles"),D=document.querySelector(".loader-container"),x=document.querySelector("body");document.querySelector("#modalBody");const T=document.querySelector(".res"),M="http://anirank.work";let v;document.addEventListener("DOMContentLoaded",function(){D.style.display="none",x.removeAttribute("hidden"),y(),f(),S.addEventListener("shown.bs.modal",function(){p.focus(),p.addEventListener("keyup",()=>{m(),E(),clearTimeout(v),p.value.length>=1?v=setTimeout(r,250):(m(),y())});function r(){try{fetch(M+"/api/search",{headers:{"X-Request-With":"XMLHttpRequest","Content-Type":"application/json","X-CSRF-TOKEN":q},method:"POST",body:JSON.stringify({q:p.value})}).then(t=>t.json()).then(t=>{m(),t.posts.forEach(e=>{let a="http://127.0.0.1:8000/anime/"+e.id+"/"+e.slug,n=document.createElement("div");n.classList.add("result");let s=document.createElement("a");s.href=a,s.textContent=e.title,n.appendChild(s),l.appendChild(n)}),t.artists.forEach(e=>{let a="http://127.0.0.1:8000/artist/"+e.id+"/"+e.name_slug,n=document.createElement("div");n.classList.add("result");let s=document.createElement("a");s.href=a,s.textContent=e.name,n.appendChild(s),i.appendChild(n)}),t.tags.forEach(e=>{let a=e.name.split(" "),n=a[0],L="http://127.0.0.1:8000/animes?type=&year="+a[1]+"&season="+n+"&sort=&char=",h=document.createElement("div");h.classList.add("result");let C=document.createElement("a");C.href=L,C.textContent=e.name,h.appendChild(C),c.appendChild(h)}),t.users.forEach(e=>{let a="http://127.0.0.1:8000/user/"+e.id,n=document.createElement("div");n.classList.add("result");let s=document.createElement("a");s.href=a,s.textContent=e.name,n.appendChild(s),u.appendChild(n)}),T.classList.remove("hidden")})}catch{}}});function m(){l.innerHTML="",i.innerHTML="",c.innerHTML="",u.innerHTML=""}function y(){l.appendChild(o("posts")),i.appendChild(o("artists")),c.appendChild(o("tags")),u.appendChild(o("users"))}function f(){g.forEach(r=>{r.textContent.length>25&&(r.textContent=r.textContent.substr(0,25)+"...")})}function o(r){let t=document.createElement("div");t.className="result",t.id=r;let e=document.createElement("span");return e.textContent="Nothing",t.appendChild(e),t}function d(){const r=document.createElement("div");r.className="d-flex justify-content-center";const t=document.createElement("div");t.className="spinner-border",t.setAttribute("role","status");const e=document.createElement("span");return e.className="visually-hidden",e.textContent="Loading...",t.appendChild(e),r.appendChild(t),r}function E(){l.appendChild(d()),i.appendChild(d()),c.appendChild(d()),u.appendChild(d())}});
