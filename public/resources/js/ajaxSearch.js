const u=document.querySelector("#exampleModal"),t=document.querySelector("#posts"),i=document.querySelector("#artists"),o=document.querySelector("#tags"),a=document.querySelector("#users"),r=document.querySelector("#searchInputModal"),p=document.querySelector('meta[name="csrf-token"]').content,v=document.querySelectorAll(".post-titles"),h=document.querySelector(".loader-container"),y=document.querySelector("#body");document.querySelector("#modalBody");const L=document.querySelector(".res");let l,f=500;window.addEventListener("load",function(d){h.style.display="none",y.classList.remove("hidden")});document.addEventListener("DOMContentLoaded",function(){d(),c(),u.addEventListener("shown.bs.modal",function(){r.focus(),r.addEventListener("keyup",()=>{t.innerHTML='<div class="d-flex justify-content-center"><div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div></div>',i.innerHTML='<div class="d-flex justify-content-center"><div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div></div>',o.innerHTML='<div class="d-flex justify-content-center"><div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div></div>',a.innerHTML='<div class="d-flex justify-content-center"><div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div></div>',clearTimeout(l),r.value.length>=1?l=setTimeout(e,f):(t.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>',i.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>',o.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>',a.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>')});function e(){try{fetch("http://localhost:8000/api/search?q="+r.value,{headers:{"X-Request-With":"XMLHttpRequest","Content-Type":"application/json","X-CSRF-TOKEN":p},method:"get"}).then(n=>n.json()).then(n=>{t.innerHTML="",i.innerHTML="",o.innerHTML="",a.innerHTML="",n.posts.forEach(s=>{t.innerHTML+='<div class="result"><a href="http://localhost:8000/anime/'+s.id+"/"+s.slug+'"><span>'+s.title+"</span></a></div>"}),n.artists.forEach(s=>{i.innerHTML+='<div class="result"><a href="http://localhost:8000/artist/'+s.id+"/"+s.name_slug+'"><span>'+s.name+"</span></a></div>"}),n.tags.forEach(s=>{o.innerHTML+='<div class="result"><a href="http://localhost:8000/filter?tag='+s.name.replace(/ /g,"+")+'"><span>'+s.name+"</span></a></div>"}),n.users.forEach(s=>{a.innerHTML+='<div class="result"><a href="http://localhost:8000/user/'+s.id+'"><span>'+s.name+"</span></a></div>"}),L.classList.remove("hidden")})}catch(n){console.log(n)}}});function d(){t.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>',i.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>',o.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>',a.innerHTML='<div class="result" id="posts"><span>Nothing</span></div>'}function c(){v.forEach(e=>{e.textContent.length>25&&(e.textContent=e.textContent.substr(0,25)+"...")})}});
