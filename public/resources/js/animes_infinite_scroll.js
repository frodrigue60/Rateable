document.addEventListener("DOMContentLoaded",p=>{const u=document.querySelector("#data"),m=document.querySelector("#form-filter");let c,n=1,r,l;const d=window.location.href;y(),m.addEventListener("change",function(o){let e=document.querySelector("#select-year").value,t=document.querySelector("#select-season").value,a=document.querySelector("#select-char").value;w(e,t,a)}),window.addEventListener("scroll",function(){window.scrollY+window.innerHeight+300>=document.documentElement.scrollHeight&&(r==null||n<=r)&&(n++,h(n))});function i(o){fetch(o,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(e=>{if(e.ok)return e.json();r=0}).then(e=>{if(e.html===""){r=0;return}else{let f=function(){a.forEach(s=>{s.textContent.length>25&&(s.textContent=s.textContent.substr(0,25)+"...")})};var t=f;r=e.lastPage,u.innerHTML+=e.html;let a=document.querySelectorAll(".post-titles");f()}}).catch(e=>console.error(e))}function h(o){let e=window.location.href,t=new URLSearchParams(window.location.search);t.has("filterBy")||t.has("type")||t.has("tag")||t.has("sort")||t.has("char")?c="&page=":c="?page=",l=e+c+o,i(l)}function y(){i(d)}function w(o,e,t){n=1,g();let a="?year="+o+"&season="+e+"&char="+t;l=d+a,history.pushState(null,null,l),i(l)}function g(){u.innerHTML=""}});
